{% extends 'store/base.html' %} {% block title %}{{ attraction.name }} |
TouristEcomm{% endblock %} {% block content %}

<div class="row mb-4">
  <div class="col-md-6">
    <img
      src="{{ attraction.image_url }}"
      class="img-fluid rounded shadow-sm mb-3"
      alt="{{ attraction.name }}"
    />
  </div>
  <div class="col-md-6">
    <h2 class="fw-bold">{{ attraction.name }}</h2>
    <p class="text-muted">{{ attraction.category }}</p>
    <p>{{ attraction.description }}</p>
    <p class="fw-bold text-success">
      Ticket Price: â‚¹{{ attraction.ticket_price }}
    </p>
    <p><strong>Opening Hours:</strong> {{ attraction.opening_hours }}</p>
    {% if user.is_authenticated %}
    <a
      href="{% url 'book_attractions' attraction.slug %}"
      class="btn btn-success"
      >Book Now</a
    >
    {% else %}
    <a
      href="{% url 'signin' %}?next={% url 'book_attractions' attraction.slug %}"
      class="btn btn-warning"
      >Sign in to Book</a
    >
    {% endif %}
  </div>
</div>

<hr />

<!-- Review Section -->
<div class="mt-4">
  <h4 class="mb-3">Visitor Reviews</h4>

  {% if user.is_authenticated %}
  <form method="post" class="mb-4">
    {% csrf_token %}
    <div class="mb-3">
      <textarea
        name="review"
        rows="3"
        class="form-control"
        placeholder="Share your experience..."
        required
      ></textarea>
    </div>
    <button class="btn btn-primary">Submit Review</button>
  </form>
  {% else %}
  <p><a href="{% url 'signin' %}">Sign in</a> to write a review.</p>
  {% endif %} {% for r in reviews %}
  <div class="card mb-3 shadow-sm">
    <div class="card-body">
      <h6 class="card-title mb-1 text-primary">{{ r.user.username }}</h6>
      <p class="card-text">{{ r.content }}</p>
      <p class="text-muted mb-0">
        <small>Posted on {{ r.created_at|date:"M d, Y H:i" }}</small>
      </p>
    </div>
  </div>
  {% empty %}
  <p class="text-muted">No reviews yet. Be the first to share your thoughts!</p>
  {% endfor %}
</div>

{% endblock %}
